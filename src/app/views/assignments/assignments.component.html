<!--* Authors: Dmitry Bashmakov, Mathias Donath, Josh Fagen, Lidiya Sokolovskya
* Date Created: April 9, 2019
* Last Modified: April 15, 2019
* Main Purpose: HTML component to show all assignments, current and submitted.-->


<div>
<div class="inline">
    <h3>Assignments</h3>
    <!--Show Add Assignment button if teacher is logged in-->
    <p *ngIf="nav.role == 'teacher'">
        <button mat-raised-button color="accent" routerLink="/addassignment">Add Assignment</button>
    </p>
</div>

<!--Use mat-tab-group to display assignments in four categories: All, Ongoing, Completed, and Upcoming-->
<mat-tab-group mat-align-tabs="end">
    <!--All Assignments tab-->
    <mat-tab label="All"><mat-accordion multi="true" class="my-headers-align">
        <div *ngFor="let assignment of assignments | reverse;">
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                    </mat-panel-title>
                    <mat-panel-title>
                        ID: {{assignment.id}}
                    </mat-panel-title>
                    <mat-panel-title>
                        Percent: {{assignment.weight}}
                    </mat-panel-title>
                    <mat-panel-title>
                        Subject: {{assignment.title}}
                    </mat-panel-title>
                    <mat-panel-title>
                        Release Date: {{assignment.releaseDate | date:'mediumDate'}}
                    </mat-panel-title>
                    <mat-panel-title>
                        Due Date: {{assignment.dueDate | date: 'mediumDate'}}
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <div class="showSummary" [innerHTML]="assignment.body"></div>
                <!--Display View and Edit Buttons if teacher is logged in-->
                <div class="inline" *ngIf="nav.role == 'teacher'">
                    <button mat-raised-button color="primary" routerLink="/gradeassignment/{{assignment.id}}">View Submissions</button>
                    <button mat-raised-button color="warn" routerLink="/editassignment/{{assignment.id}}">Edit Assignment</button>
                </div>
                <!--Display Submit Assignment Button if Student is logged in-->
                <div class="inline" *ngIf="nav.role == 'student'"><button mat-raised-button color="primary" routerLink="/submitassignment/{{assignment.id}}">Submit assignment</button></div>


            </mat-expansion-panel>
        </div>
    </mat-accordion>
    </mat-tab>
    <!--Ongoing assignments-->
    <mat-tab label="Ongoing">
        <mat-accordion multi="true" class="my-headers-align">
        <div *ngFor="let ongoingAgnmt of ongoing">
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        ID: {{ongoingAgnmt.id}}
                    </mat-panel-title>
                    <mat-panel-title>
                        Percent: {{ongoingAgnmt.weight}}
                    </mat-panel-title>
                    <mat-panel-title>
                        Subject: {{ongoingAgnmt.title}}
                    </mat-panel-title>
                    <mat-panel-title>
                        Release Date: {{ongoingAgnmt.releaseDate | date:'mediumDate'}}
                    </mat-panel-title>
                    <mat-panel-title>
                        Due Date: {{ongoingAgnmt.dueDate | date: 'mediumDate'}}
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <div class="showSummary" [innerHTML]="ongoingAgnmt.body"></div>

                <div class="inline" *ngIf="nav.role == 'teacher'">
                    <button mat-raised-button color="primary" routerLink="/gradeassignment/{{ongoingAgnmt.id}}">View Submissions</button>
                    <button mat-raised-button color="warn" routerLink="/editAssignment/{{ongoingAgnmt.id}}">Edit Assignment</button>
                </div>
                <div class="inline" *ngIf="nav.role == 'student'"><button mat-raised-button color="primary" routerLink="/submitassignment/{{ongoingAgnmt.id}}">Submit assignment</button></div>


            </mat-expansion-panel>
        </div>
    </mat-accordion>


    </mat-tab>

    <!--Completed asignments-->
    <mat-tab label="Completed">
        <mat-accordion multi="true" class="my-headers-align">
            <div *ngFor="let completedAgnmt of due">
                <mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <!--User ID: {{assignment.userid}}-->
                        </mat-panel-title>
                        <mat-panel-title>
                            ID: {{completedAgnmt.id}}
                        </mat-panel-title>
                        <mat-panel-title>
                            Percent: {{completedAgnmt.weight}}
                        </mat-panel-title>
                        <mat-panel-title>
                            Subject: {{completedAgnmt.title}}
                        </mat-panel-title>
                        <mat-panel-title>
                            Release Date: {{completedAgnmt.releaseDate | date:'mediumDate'}}
                        </mat-panel-title>
                        <mat-panel-title>
                            Due Date: {{completedAgnmt.dueDate | date: 'mediumDate'}}
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <div class="showSummary" [innerHTML]="completedAgnmt.body"></div>

                    <div class="inline" *ngIf="nav.role == 'teacher'">
                        <button mat-raised-button color="primary" routerLink="/gradeassignment/{{completedAgnmt.id}}">View Submissions</button>
                    </div>
                    <div class="inline" *ngIf="nav.role == 'student'"><button mat-raised-button color="primary" routerLink="/submitassignment/{{completedAgnmt.id}}">Submit assignment</button></div>


                </mat-expansion-panel>
            </div>
        </mat-accordion>
    </mat-tab>
    <mat-tab label="Upcoming">
        <mat-accordion multi="true" class="my-headers-align">
            <div *ngFor="let upcomingAgnmt of upcoming">
                <mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <!--User ID: {{assignment.userid}}-->
                        </mat-panel-title>
                        <mat-panel-title>
                            ID: {{upcomingAgnmt.id}}
                        </mat-panel-title>
                        <mat-panel-title>
                            Percent: {{upcomingAgnmt.weight}}
                        </mat-panel-title>
                        <mat-panel-title>
                            Subject: {{upcomingAgnmt.title}}
                        </mat-panel-title>
                        <mat-panel-title>
                            Release Date: {{upcomingAgnmt.releaseDate | date:'mediumDate'}}
                        </mat-panel-title>
                        <mat-panel-title>
                            Due Date: {{upcomingAgnmt.dueDate | date: 'mediumDate'}}
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <div [innerHTML]="upcomingAgnmt.body"></div>

                    <div class="inline" *ngIf="nav.role == 'teacher'">
                        <button mat-raised-button color="warn" routerLink="/editAssignment/{{upcomingAgnmt.id}}">Edit Assignment</button>
                    </div>



                    <!--<button mat-raised-button color="accent" routerLink="/seasons/{{show.id}}">Details</button>-->
                </mat-expansion-panel>
            </div>
        </mat-accordion>
    </mat-tab>
</mat-tab-group>
</div>
